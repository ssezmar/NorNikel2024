{"ast":null,"code":"var _jsxFileName = \"/home/ssezmar/programming/xakatons/NorNikel2024/frontend2/llm-frontend/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nfunction App() {\n  const [question, setQuestion] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [images, setImages] = useState([]); // Массив изображений с данными\n  const [loading, setLoading] = useState(false);\n\n  // Функция для загрузки изображений с сервера\n  async function fetchImages() {\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          question: \"Ваш вопрос\"\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Ошибка сети\");\n      }\n      const data = await response.json();\n      console.log(data);\n      return data; // Возвращает JSON с изображениями\n    } catch (error) {\n      console.error(\"Ошибка:\", error);\n      return null;\n    }\n  }\n\n  // Обработка отправки вопроса\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setResponse(\"\");\n    setImages([]);\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          question\n        })\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setResponse(data.answer);\n\n        // Загружаем каждое изображение как Blob\n        const loadedImages = await Promise.all(data.images.map(async image => {\n          const imageBlobUrl = await fetchImageBlob(image.url);\n          return {\n            ...image,\n            blobUrl: imageBlobUrl // Добавляем blob URL для отображения\n          };\n        }));\n        setImages(loadedImages);\n      } else {\n        setResponse(\"Ошибка сервера\");\n      }\n    } catch (err) {\n      setResponse(\"Ошибка сети\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"NorNikel Finder\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: question,\n    onChange: e => setQuestion(e.target.value),\n    rows: 5,\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441...\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, loading ? \"Загрузка...\" : \"Отправить\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"response\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \"\\u041E\\u0442\\u0432\\u0435\\u0442:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, response || \"Ответ появится здесь...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B \\u0441 \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0445 \\u0431\\u0440\\u0430\\u043B\\u0430\\u0441\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, images.map((image, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"image-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, image.blobUrl ? /*#__PURE__*/React.createElement(\"img\", {\n    src: image.blobUrl,\n    alt: `Image ${index + 1}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, \"\\u0424\\u0430\\u0439\\u043B:\"), \" \", image.filename, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 57\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430:\"), \" \", image.page))))));\n}\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","App","question","setQuestion","response","setResponse","images","setImages","loading","setLoading","fetchImages","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","console","log","error","handleSubmit","e","preventDefault","res","answer","loadedImages","Promise","all","map","image","imageBlobUrl","fetchImageBlob","url","blobUrl","err","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","rows","placeholder","required","type","disabled","index","key","src","alt","filename","page"],"sources":["/home/ssezmar/programming/xakatons/NorNikel2024/frontend2/llm-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [question, setQuestion] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [images, setImages] = useState([]); // Массив изображений с данными\n  const [loading, setLoading] = useState(false);\n\n  // Функция для загрузки изображений с сервера\n  async function fetchImages() {\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ question: \"Ваш вопрос\" }),\n      });\n  \n      if (!response.ok) {\n        throw new Error(\"Ошибка сети\");\n      }\n  \n      const data = await response.json();\n      console.log(data);\n      return data; // Возвращает JSON с изображениями\n    } catch (error) {\n      console.error(\"Ошибка:\", error);\n      return null;\n    }\n  }\n  \n\n  // Обработка отправки вопроса\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setResponse(\"\");\n    setImages([]);\n\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ question }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        setResponse(data.answer);\n\n        // Загружаем каждое изображение как Blob\n        const loadedImages = await Promise.all(\n          data.images.map(async (image) => {\n            const imageBlobUrl = await fetchImageBlob(image.url);\n            return {\n              ...image,\n              blobUrl: imageBlobUrl, // Добавляем blob URL для отображения\n            };\n          })\n        );\n\n        setImages(loadedImages);\n      } else {\n        setResponse(\"Ошибка сервера\");\n      }\n    } catch (err) {\n      setResponse(\"Ошибка сети\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>NorNikel Finder</h1>\n\n      {/* Форма для ввода вопроса */}\n      <form onSubmit={handleSubmit}>\n        <textarea\n          value={question}\n          onChange={(e) => setQuestion(e.target.value)}\n          rows={5}\n          placeholder=\"Введите ваш вопрос...\"\n          required\n        ></textarea>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"Загрузка...\" : \"Отправить\"}\n        </button>\n      </form>\n\n      {/* Ответ от сервера */}\n      <div className=\"response\">\n        <h2>Ответ:</h2>\n        <p>{response || \"Ответ появится здесь...\"}</p>\n      </div>\n\n      {/* Отображение изображений */}\n      <div className=\"images\">\n        <h2>Страницы с которых бралась информация:</h2>\n        <div className=\"image-grid\">\n          {images.map((image, index) => (\n            <div key={index} className=\"image-item\">\n              {image.blobUrl ? (\n                <img src={image.blobUrl} alt={`Image ${index + 1}`} />\n              ) : (\n                <p>Ошибка загрузки изображения</p>\n              )}\n              <p>\n                <strong>Файл:</strong> {image.filename} <br />\n                <strong>Страница:</strong> {image.page}\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}