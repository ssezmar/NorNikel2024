{"ast":null,"code":"var _jsxFileName = \"/home/ssezmar/programming/xakatons/NorNikel2024/frontend2/llm-frontend/src/App.js\";\nimport React, { useState } from \"react\";\nimport \"./App.css\";\nfunction App() {\n  const [question, setQuestion] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Функция для загрузки изображения как Blob URL\n  const fetchImageBlob = async url => {\n    try {\n      const res = await fetch(url);\n      if (!res.ok) throw new Error(\"Ошибка загрузки изображения\");\n      const blob = await res.blob();\n      return URL.createObjectURL(blob);\n    } catch (error) {\n      console.error(error);\n      return null;\n    }\n  };\n\n  // Обработка отправки вопроса\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setResponse(\"\");\n    setImages([]);\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          question\n        })\n      });\n      if (res.ok) {\n        const data = await res.json();\n\n        // Обработка ответа\n        setResponse(data.answer || \"Ответ не найден\");\n\n        // Загружаем изображения\n        if (Array.isArray(data.images)) {\n          const loadedImages = await Promise.all(data.images.map(async image => {\n            const blobUrl = await fetchImageBlob(image.url);\n            return {\n              ...image,\n              blobUrl // Добавляем blob URL для отображения\n            };\n          }));\n          setImages(loadedImages);\n        } else {\n          console.warn(\"Нет изображений в ответе\");\n        }\n      } else {\n        setResponse(\"Ошибка сервера\");\n      }\n    } catch (err) {\n      console.error(\"Ошибка сети:\", err);\n      setResponse(\"Ошибка сети\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \"NorNikel Finder\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: question,\n    onChange: e => setQuestion(e.target.value),\n    rows: 5,\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441...\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, loading ? \"Загрузка...\" : \"Отправить\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"response\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, \"\\u041E\\u0442\\u0432\\u0435\\u0442:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, response || \"Ответ появится здесь...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B \\u0441 \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0445 \\u0431\\u0440\\u0430\\u043B\\u0430\\u0441\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, images.map((image, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"image-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, image.blobUrl ? /*#__PURE__*/React.createElement(\"img\", {\n    src: image.blobUrl,\n    alt: `Image ${index + 1}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"\\u0424\\u0430\\u0439\\u043B:\"), \" \", image.filename, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 57\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430:\"), \" \", image.page))))));\n}\nexport default App;","map":{"version":3,"names":["React","useState","App","question","setQuestion","response","setResponse","images","setImages","loading","setLoading","fetchImageBlob","url","res","fetch","ok","Error","blob","URL","createObjectURL","error","console","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","data","json","answer","Array","isArray","loadedImages","Promise","all","map","image","blobUrl","warn","err","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","rows","placeholder","required","type","disabled","index","key","src","alt","filename","page"],"sources":["/home/ssezmar/programming/xakatons/NorNikel2024/frontend2/llm-frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [question, setQuestion] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Функция для загрузки изображения как Blob URL\n  const fetchImageBlob = async (url) => {\n    try {\n      const res = await fetch(url);\n      if (!res.ok) throw new Error(\"Ошибка загрузки изображения\");\n      const blob = await res.blob();\n      return URL.createObjectURL(blob);\n    } catch (error) {\n      console.error(error);\n      return null;\n    }\n  };\n\n  // Обработка отправки вопроса\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setResponse(\"\");\n    setImages([]);\n\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/ask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ question }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n\n        // Обработка ответа\n        setResponse(data.answer || \"Ответ не найден\");\n\n        // Загружаем изображения\n        if (Array.isArray(data.images)) {\n          const loadedImages = await Promise.all(\n            data.images.map(async (image) => {\n              const blobUrl = await fetchImageBlob(image.url);\n              return {\n                ...image,\n                blobUrl, // Добавляем blob URL для отображения\n              };\n            })\n          );\n          setImages(loadedImages);\n        } else {\n          console.warn(\"Нет изображений в ответе\");\n        }\n      } else {\n        setResponse(\"Ошибка сервера\");\n      }\n    } catch (err) {\n      console.error(\"Ошибка сети:\", err);\n      setResponse(\"Ошибка сети\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>NorNikel Finder</h1>\n\n      {/* Форма для ввода вопроса */}\n      <form onSubmit={handleSubmit}>\n        <textarea\n          value={question}\n          onChange={(e) => setQuestion(e.target.value)}\n          rows={5}\n          placeholder=\"Введите ваш вопрос...\"\n          required\n        ></textarea>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"Загрузка...\" : \"Отправить\"}\n        </button>\n      </form>\n\n      {/* Ответ от сервера */}\n      <div className=\"response\">\n        <h2>Ответ:</h2>\n        <p>{response || \"Ответ появится здесь...\"}</p>\n      </div>\n\n      {/* Отображение изображений */}\n      <div className=\"images\">\n        <h2>Страницы с которых бралась информация:</h2>\n        <div className=\"image-grid\">\n          {images.map((image, index) => (\n            <div key={index} className=\"image-item\">\n              {image.blobUrl ? (\n                <img src={image.blobUrl} alt={`Image ${index + 1}`} />\n              ) : (\n                <p>Ошибка загрузки изображения</p>\n              )}\n              <p>\n                <strong>Файл:</strong> {image.filename} <br />\n                <strong>Страница:</strong> {image.page}\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}